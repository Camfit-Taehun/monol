# UC-03: 멀티 워크트리 실험 + 자동 평가/선택

## 가치(Why)
동일 요구사항을 여러 구현 후보로 병렬 생성하고 점수로 선택해 생산성을 극대화합니다.

## 범위(What)
- 트리거: 명령 기반(`monol exp run`)
- 산출: 후보 점수표 + 추천 후보 + (선택) 자동 PR

## 선행 조건/의존(Task)
- TASK-002 worktree 버그 수정
- TASK-200 events

## 구현 설계/개발 플랜(How)
### 1) 워크트리 오케스트레이션
- `monol exp create --count 3`
- 브랜치 규칙: `exp/<ticket>/<variant>`

### 2) 평가 파이프라인
- 각 후보에서:
  - lint/test
  - (선택) bench
- 점수 계산:
  - tests pass: +100
  - lint error: -5 * n
  - duration: -durationWeight

### 3) 결과 저장
- events: `exp.run.started`, `exp.variant.scored`, `exp.run.completed`

## 수정/생성 파일(초안)
- `monol/src/core/exp/orchestrator.ts`
- `monol/src/core/exp/scoring.ts`
- `monol/src/core/git/worktree.ts`
- `monol/.claude-plugin/commands/exp-run.md`

## 테스트 시나리오(재현 절차)
### 통합 테스트
1) 작은 예제 repo에서 exp run
2) 2개 후보는 일부러 테스트 실패하도록 유도
3) 기대: 통과 후보가 추천됨 + 점수표 출력

## 완료 기준(DoD)
- [ ] 기능이 end-to-end로 재현된다
- [ ] 실패 케이스(권한/빈 데이터/네트워크 오류) 처리
- [ ] 자동 테스트 최소 1개 추가(단위/통합/스크립트)
