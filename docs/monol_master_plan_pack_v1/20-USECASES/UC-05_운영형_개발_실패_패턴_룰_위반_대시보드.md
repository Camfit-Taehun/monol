# UC-05: 운영형 개발: 실패 패턴/룰 위반 대시보드

## 가치(Why)
테스트/훅 실패, 룰 위반을 이벤트로 축적해 대시보드로 관측합니다.

## 범위(What)
- 트리거: 훅/CI 실행 시 events 적재
- 산출: stats API + 콘솔 UI 위젯

## 선행 조건/의존(Task)
- TASK-204 server→datastore 통합
- TASK-007 server 보안

## 구현 설계/개발 플랜(How)
### 1) 이벤트 적재
- test.fail, hook.fail, rule.violated 이벤트 정의
- payload에 최소한:
  - name, message, stackSnippet, files

### 2) stats API
- `GET /api/stats/failures?range=7d`
- `GET /api/stats/rule-violations?range=30d`

### 3) UI
- Top failures 표 + 클릭 시 drill-down

## 수정/생성 파일(초안)
- `monol/monol-server/src/api/stats.js`
- `monol/src/core/stats/aggregate.ts`
- `monol/tests/stats-aggregate.test.ts`

## 테스트 시나리오(재현 절차)
### 테스트
- events fixture 넣고 stats API 응답 검증(단위/통합)
- UI는 최소 렌더 스모크

## 완료 기준(DoD)
- [ ] 기능이 end-to-end로 재현된다
- [ ] 실패 케이스(권한/빈 데이터/네트워크 오류) 처리
- [ ] 자동 테스트 최소 1개 추가(단위/통합/스크립트)
